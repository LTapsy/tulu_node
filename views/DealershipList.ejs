

<!DOCTYPE html>
<html>
<head>
    <link rel="icon" type="image/png" href="images/favicon.png">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tulu Canada</title>
    <link rel="stylesheet" href="styles/reset.css" />
    <link rel="stylesheet" href="styles/css/all.css" />
    <link rel="stylesheet" href="styles/nav.css" />
    <link rel="stylesheet" href="styles/dealershipList.css" />
    <link rel="stylesheet" href="styles/footer.css" />
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <script type="text/javascript" src="jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="Js/Helpers/DealerHelper.js"></script>
</head>
<body>
    <nav id="Nav">
        <a href="/">
            <img src="images/tulu-logo_white.png" alt="">
        </a>
        <div class="menuButton" onclick="slideMenu()">
            <i class="fas fa-bars fa-2x menuBtn"></i>
            <i class="fas fa-times fa-2x closeMenuBtn"></i>
        </div>
    </nav>

    <div id="SideMenu" class="sideMenu">
        <ul class="menu">
            
        </ul>
        <p class="loggedInAs"></p>
    </div>


    <div class="container body-content">
        <div class="heading">
            <h2>tulu Canada Dealerships</h2>
            <p>Here are the dealerships that power tulu canada's inventory.</p>
        </div>
        <div class="influencerContainer">
            <ul class="influencerList" id="influencerList"></ul>
        </div>
        <div class="dealershipContainer">
            <ul class="dealershipList" id="dealershipList">
                
            </ul>
        </div>
    </div>
    <footer>
        <ul class="footerList">
            <li class="footerListItem">
                <a href="/Home/About">
                    <h4>About</h4>
                </a>
            </li>
            <li class="footerListItem">
                <a href="/">
                    <h4>Partners</h4>
                </a>
                <ul class="footerSubLinkList">
                    <li class="SubLinkListItem">
                        <a href="/Home/DealershipList">Dealerships</a>
                    </li>
                </ul>
            </li>
            <li class="footerListItem">
                <a href="/">
                    <h4>Customer Support</h4>
                </a>
                <ul class="footerSubLinkList">
                    <li class="SubLinkListItem">
                        <a href="/">FAQ</a>
                    </li>
                    <li class="SubLinkListItem">
                        <a href="/">Feedback and Comments</a>
                    </li>
                    <li class="SubLinkListItem">
                        <a href="/Home/Contact">Contact Us</a>
                    </li>
                </ul>
            </li>
        </ul>
    </footer>


</body>
<script src="Js/sideMenu.js"></script>
<script src="Js/dealership.js"></script>
<script src="Js/privileges.js"></script>

<script>
    function ListDealers() {
    $.ajax({
        type: "PUT",
        url: "/Dealer/List",
        cache: false,
        dataType: "json",
        contentType: "application/x-www-form-urlencoded",
        success: function (results) {
            console.log(results);
        },
        error: function (results) {
            alert("Error");
        },
    });
}

ListDealers();
</script>




<script>
    function ListDealers() {
        $.ajax({
            type: "PUT",
            url: "/Dealer/ListNames",
            cache: false,
            dataType: "json",
            contentType: "application/x-www-form-urlencoded",
            success: function (results) {
                console.log(results);
                populatePage(results);
            },
            error: function (results) {
                alert("Error");
            },
        });
    }
    ListDealers();

    function populatePage(dealerList){
        var html = "";
        for(x=0;x!=dealerList.length;x++){
            html+='<li class="dealerlist" onclick="goToDealershipListing(`'+dealerList[x].id+'`)">';
            html+='    <p>Name: '+dealerList[x].name+'</p>';
            html+='    <p>Address: '+dealerList[x].notes+'</p>';
            html+='</li>';
        }
        $('#dealershipList').empty();
        $('#dealershipList').html(html);
    }

    function goToDealershipListing(dealerId){
        //window.sessionStorage.setItem("vin", vin);
        // console.log(vin);
        //LocationChange('carView');
        if (dealerId === "") {
            //window.location = "/Home/CarView?vin=" + listVehicles[index].vin + "&dealerId=" + listVehicles[index].dealerId;
            alert("error");
        } else {
            window.location = "/Home/DealerListing?dealerId=" + dealerId;
        }
    }
</script>

    @if (User.Identity.IsAuthenticated) {
        <Script>
            GetUser();
        </Script>      
    }else{
        <Script>
            guestprivileges();
        </Script> 
    }
</html>